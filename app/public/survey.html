<!DOCTYPE html>

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>Party Survey</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css"
        integrity="sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO" crossorigin="anonymous">
    <link rel="stylesheet" type="text/css" media="screen" href="style.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
</head>

<body>
    <div class="container">
        <div class="row">
            <div class="col-sm-10 offset-sm-1">
                <div class="container imageContainer">
                    <h2 class="imageText">Looking for Party</h2>
                </div>
            </div>
        </div>
        <div class="row">
            <div class="col-sm-8 offset-sm-2 centerBody">
                <form class="partyChoose">
                    <div class="form-group">
                        <h3><strong>Question 1</strong></h3>
                        <label for="question1" class="questions">When in a party I tend to take charge and lead the
                            way:</label>
                        <select class="form-control myoption" id="questionAnswer1">
                            <option>1</option>
                            <option>2</option>
                            <option>3</option>
                            <option>4</option>
                            <option>5</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <h3><strong>Question 2</strong></h3>
                        <label for="question2" class="questions">Before a quest I make sure to talk to every single
                            person of interest in town:</label>
                        <select class="form-control myoption" id="questionAnswer2">
                            <option>1</option>
                            <option>2</option>
                            <option>3</option>
                            <option>4</option>
                            <option>5</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <h3><strong>Question 3</strong></h3>
                        <label for="question3" class="questions">Before a quest I head to the local tavern to try and
                            win some money:</label>
                        <select class="form-control myoption" id="questionAnswer3">
                            <option>1</option>
                            <option>2</option>
                            <option>3</option>
                            <option>4</option>
                            <option>5</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <h3><strong>Question 4</strong></h3>
                        <label for="question4" class="questions">During a fight I prefer to stay back and let others
                            make the first move:</label>
                        <select class="form-control myoption" id="questionAnswer4">
                            <option>1</option>
                            <option>2</option>
                            <option>3</option>
                            <option>4</option>
                            <option>5</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <h3><strong>Question 5</strong></h3>
                        <label for="question5" class="questions">During a fight I use every single ability I can think
                            off:</label>
                        <select class="form-control myoption" id="questionAnswer5">
                            <option>1</option>
                            <option>2</option>
                            <option>3</option>
                            <option>4</option>
                            <option>5</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <h3><strong>Question 6</strong></h3>
                        <label for="question6" class="questions">When in a party I keep on eye on my HP and the HP of
                            others:</label>
                        <select class="form-control myoption" id="questionAnswer6">
                            <option>1</option>
                            <option>2</option>
                            <option>3</option>
                            <option>4</option>
                            <option>5</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <h3><strong>Question 7</strong></h3>
                        <label for="question7" class="questions">I'm very light on my feet and quick to react:</label>
                        <select class="form-control myoption" id="questionAnswer7">
                            <option>1</option>
                            <option>2</option>
                            <option>3</option>
                            <option>4</option>
                            <option>5</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <h3><strong>Question 8</strong></h3>
                        <label for="question8" class="questions">I prefer to rely on my muscles rather than my
                            mind:</label>
                        <select class="form-control myoption" id="questionAnswer8">
                            <option>1</option>
                            <option>2</option>
                            <option>3</option>
                            <option>4</option>
                            <option>5</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <h3><strong>Question 9</strong></h3>
                        <label for="question9" class="questions">I pay close attention to my items and the items of
                            others:</label>
                        <select class="form-control myoption" id="questionAnswer9">
                            <option>1</option>
                            <option>2</option>
                            <option>3</option>
                            <option>4</option>
                            <option>5</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <h3><strong>Question 10</strong></h3>
                        <label for="question10" class="questions">I like to be the center of attention wherever I
                            go:</label>
                        <select class="form-control myoption" id="questionAnswer10">
                            <option>1</option>
                            <option>2</option>
                            <option>3</option>
                            <option>4</option>
                            <option>5</option>
                        </select>
                    </div>
                    <button type="submit" class="btn btn-primary mybtn" id="submitbtn">Submit</button>
                </form>
            </div>
        </div>
    </div>
    <div class="jumbotron modal">
      <div class = "modal-content">
            <span class="close">&times;</span>
        <h5 id="faveClass"></h5>
        <h5>We've matched you with the following adventurers.</h5>
        <div>
            <img id="party1" src="" alt="Card image cap">
            <div>
                <h5 id="name1"></h5>
                <h5 id="class1"></h5>
            </div>
        </div>
        <div>
            <img id="party2" src="" alt="Card image cap">
            <div>
                <h5 id="name2"></h5>
                <h5 id="class2"></h5>
            </div>
        </div>
        </div>
    </div>
    <script>

        $("#submitbtn").on("click", function () {
            event.preventDefault();
            var answersArray = [];
            for (var i = 1; i <= 10; i++) {
                var question = "#questionAnswer" + i;
                var answer = $(question).val();
                answersArray.push(parseInt(answer));
            }
        
        
            $.post("/api/party", { user: answersArray }, function (data) {
                var reply = data;
                $("#faveClass").text("From your survey answers, your favored class is: " + reply.playerClass);
                $("#party1").attr("src",reply.firstparty.photo);
                $("#name1").text("Name: " + reply.firstparty.name);
                $("#class1").text("Class: " + reply.firstparty.class);
                $("#party2").attr("src",reply.secondparty.photo);
                $("#name2").text("Name: " + reply.secondparty.name);
                $("#class2").text("Class: " + reply.secondparty.class);
                $(".modal").css("display","block");
            });
        });
       $(".close").on("click",function(){
          $(".modal").css("display","none");
       })
    </script>

</body>

</html>